name: Add Compiler Label on Issue/PR create

on:
  pull_request:
    types: [opened]
  issues:
    types: [opened, edited]
  

jobs:
  add_compiler_label:
    runs-on: [self-hosted, windows]
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
    
    - name: Add Compiler Label
      uses: actions/github-script@v7
      with:
        script: |
          // get current jai version
          const { createCurrentVersionLabel } = require('./.github/workflows/create_label.js');
          const jai_version = await createCurrentVersionLabel({github, context});

          await github.rest.issues.addLabels({
            owner: context.repo.owner,
            repo: context.repo.repo,
            issue_number: context.issue.number,
            labels: [ jai_version ]
          });
